if (self.CavalryLogger) { CavalryLogger.start_js(["3Uqr9"]); }

__d("MChat",["Bootloader","ChannelEventType","DOM","MChannelManager","MTouchChannelManager","Stratcom","$"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();a=function(a){__p&&__p();k.initialize(),a.killDynatemplate?l.listen([h.MESSAGE,h.PAGES_MESSAGE],null,function(event){n(a,event),l.removeCurrentListener()}):g.loadModules(["MMessages"],function(b){b=new b(a);var c=[l.listen([h.MESSAGE,h.PAGES_MESSAGE],null,b.handleMessageReceived.bind(b)),l.listen("typ",null,b.handleUserTyping.bind(b))];l.listen("m:page:unload",null,function(){b=null;for(var a=0;a<c.length;a++)c[a].remove();c=[];l.removeCurrentListener()})},"MChat"),a.pageID&&j.subscribeIrisQueue(a.pageID.toString(),"0")};function n(a,event){g.loadModules(["MReactComponentRenderer","MMessageThread.react"],function(b,c){var d=i.create("div"),e={downloadLink:a.downloadLink,initialEvent:event,isCanonical:a.isCanonicalThread,otherUserFBID:a.messageOtherUserFBID,pageID:a.pageID,shouldParseEmoticons:a.parseEmoticons,threadFBID:a.messageThreadFBID,userProfileUris:a.usersProfileUri,userShortNames:a.usersShortNames};b(c,d,e);i.appendContent(m("messageGroup"),d)},"MChat")}f.main=a}),null);
__d("MPresenceIcon",["DOM","MLegacyDataStore","MRequest","MURI","Stratcom","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m=0,n=1,o=2,p;function q(){__p&&__p();var a=g.scry(document.body,"i","presence-icon"),b=[];for(var c=0,d=a.length;c<d;++c){var e=h.get(a[c]);e.userid&&!b[e.userid]&&(b[e.userid]=1)}e=new j("/chat/presence_icon.php").toString();c=new i(e).setData({ids:Object.keys(b)}).setIgnoreErrors(!0);c.listen("done",function(d){for(var b=0,c=a.length;b<c;++b){var e=h.get(a[b]);e&&e.userid&&k.hasSigil(a[b],"online-icon")&&d[e.userid]==n||k.hasSigil(a[b],"mobile-icon")&&d[e.userid]==o?g.show(a[b]):g.hide(a[b])}});c.listen("finally",function(a){clearTimeout(p),p=l(q,m)});c.send()}m=m?m*100:6e4;q()}),null);
__d("CallbackManagerController",["ErrorUtils"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a){"use strict";this.$1=[],this.$2=[undefined],this.$3=a}a.prototype.executeOrEnqueue=function(a,b,c){"use strict";c=c||{};var d=this.$4(b,a,c);if(d)return 0;this.$2.push({fn:b,request:a,options:c});d=this.$2.length-1;this.$1.push(d);return d};a.prototype.unsubscribe=function(a){"use strict";delete this.$2[a]};a.prototype.reset=function(){"use strict";this.$2=[]};a.prototype.getRequest=function(a){"use strict";return this.$2[a]};a.prototype.runPossibleCallbacks=function(a){"use strict";__p&&__p();var b=this.$1;this.$1=[];var c=[];b.forEach(function(b){var d=this.$2[b];if(!d)return;d=this.$3(d.request,babelHelpers["extends"]({},d.options,a));d?c.push({args:d,id:b}):this.$1.push(b)}.bind(this));c.forEach(function(a){var b=a.args;a=a.id;var c=this.$2[a];if(!c)return;delete this.$2[a];this.$5(c.fn,b,c.request)}.bind(this))};a.prototype.$4=function(a,b,c){"use strict";c=this.$3(b,c);c&&this.$5(a,c,b);return!!c};a.prototype.$5=function(a,b,c){"use strict";c={ids:c};g.applyWithGuard(a,c,b)};e.exports=a}),null);
__d("KeyedCallbackManager",["CallbackManagerController","ErrorUtils"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(){"use strict";this.$1={},this.$2=new g(this.$3.bind(this))}a.prototype.executeOrEnqueue=function(a,b){"use strict";__p&&__p();if(!(a instanceof Array)){var c=a,d=b;a=[a];b=function(a){d(a[c])}}a=a.filter(function(a){var b=a!==null&&a!==undefined;b||h.applyWithGuard(function(){throw new Error("KeyedCallbackManager.executeOrEnqueue: key "+JSON.stringify(a)+" is invalid")});return b});return this.$2.executeOrEnqueue(a,b)};a.prototype.unsubscribe=function(a){"use strict";this.$2.unsubscribe(a)};a.prototype.reset=function(){"use strict";this.$2.reset(),this.$1={}};a.prototype.getUnavailableResources=function(a){"use strict";a=this.$2.getRequest(a);var b=[];a&&(b=a.request.filter(function(a){return!this.$1[a]}.bind(this)));return b};a.prototype.getUnavailableResourcesFromRequest=function(a){"use strict";a=Array.isArray(a)?a:[a];return a.filter(function(a){if(a!==null&&a!==undefined)return!this.$1[a]},this)};a.prototype.addResourcesAndExecute=function(a){"use strict";Object.assign(this.$1,a),this.$2.runPossibleCallbacks()};a.prototype.setResource=function(a,b){"use strict";this.$1[a]=b,this.$2.runPossibleCallbacks()};a.prototype.getResource=function(a){"use strict";return this.$1[a]};a.prototype.getAllResources=function(){"use strict";return this.$1};a.prototype.dumpResources=function(){"use strict";var a={};for(var b in this.$1){var c=this.$1[b];typeof c==="object"&&(c=babelHelpers["extends"]({},c));a[b]=c}return a};a.prototype.$3=function(a){"use strict";var b={};for(var c=0;c<a.length;c++){var d=a[c],e=this.$1[d];if(typeof e==="undefined")return!1;b[d]=e}return[b]};e.exports=a}),null);
__d("MMessageServerResourceFetcher",["KeyedCallbackManager","MRequest"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a,b){this.$3=a,this.$4=b,this.$1=new g(),this.$2={}}a.prototype.get=function(a,b){this.getMulti([a],function(c){b(c[a])})};a.prototype.getMulti=function(a,b){__p&&__p();b=!this.$1.executeOrEnqueue(a,b);if(b)return;var c=a.filter(function(a){var b=!this.$1.getResource(a)&&!this.$2[a];b&&(this.$2[a]=!0);return b}.bind(this));if(c.length===0)return;b=new h(this.$3(c)).setMethod("GET");b.listen("done",function(a){if(!a||!a.payload)return;a=this.$4(a.payload);a&&this.$1.addResourcesAndExecute(a)}.bind(this));b.listen("finally",function(a){c.forEach(function(){delete this.$2[a]}.bind(this))}.bind(this));b.send()};a.prototype.set=function(a,b){var c={};c[a]=b;this.$1.addResourcesAndExecute(c)};e.exports=a}),null);
__d("MMessagesReadReceipts",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=undefined,h={};function a(a,b){g=a,h=b}function b(a,b){if(a!==g)return;for(var c in b){if(!Object.prototype.hasOwnProperty.call(b,c))continue;a=b[c].action;var d=h[c].action;d===undefined?h[c]=b[c]:h[c]=Math.max(d,a)===d?h[c]:b[c]}}function c(a,b,c){__p&&__p();if(a!==g)return{};a={};for(var d in h){if(!Object.prototype.hasOwnProperty.call(h,d))continue;else if(c.indexOf(d)!==-1)continue;else if(h[d].action<b)continue;a[d]=h[d].action}return a}e.exports={init:a,update:b,getSeenBy:c}}),null);
__d("XChatUserInfoAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/user_info/",{ids:{type:"IntVector",defaultValue:[]}})}),null);
__d("MShortProfiles",["MMessageServerResourceFetcher","XChatUserInfoAsyncController"],(function(a,b,c,d,e,f,g,h){"use strict";var i=new g(function(a){return h.getURIBuilder().setIntVector("ids",a).getURI().toString()},function(a){return a.profiles});a={get:function(a,b){i.get(a,b)},getMulti:function(a,b){i.getMulti(a,b)},set:function(a,b){i.set(a,b)}};e.exports=a}),null);
__d("MMessagesReplyComposer",["CSS","CurrentUser","DOM","MMessagesConfig","MMultiPhotoUploaderAttachmentState","MRequest","Stratcom","SubscriptionsHandler","cx","fbt"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q="m-messaging-error-message",r="m-messaging-error-resend-btn",s=1e3;function a(a,b,c,d,e){"use strict";this.form=a,this.textbox=b,this.sendButton=c,this.likeButton=d,this.userID=h.getID(),this.threadID=e,this.state={isFocused:!1,isTyping:!1,hasPhotos:!1},this.photosState=k.getDefaultState(),this.prevSendRequest=null,this.pageListeners=new n(),this.pageListeners.addSubscriptions(i.listen(this.textbox,"focus",null,this.$1.bind(this)),i.listen(this.textbox,"blur",null,this.$2.bind(this)),i.listen(this.textbox,["keyup","keydown","change","input"],null,this.$3.bind(this)),i.listen(this.sendButton,"click",null,this.$4.bind(this)),i.listen(this.likeButton,"click",null,this.$5.bind(this)),m.listen("click",[r],this.$6.bind(this)),m.listen("MMultiPhotoUploader:attachments:change",null,this.$7.bind(this))),m.listen("m:page:unload",null,function(){this.pageListeners.release(),m.removeCurrentListener()}.bind(this)),this.$8(),this.$9(),g.removeClass(this.form,"_3ci_")}a.prototype.$7=function(event){"use strict";this.photosState=event.getData(),this.$10("hasPhotos",this.photosState[k.UPLOADED]>0||this.photosState[k.SENDING]>0),this.$9()};a.prototype.$1=function(){"use strict";this.$10("isFocused",!0)};a.prototype.$2=function(){"use strict";this.$10("isFocused",!1)};a.prototype.$3=function(){"use strict";this.$10("isTyping",this.textbox.value!==""),this.$9()};a.prototype.$9=function(){"use strict";var a=this.photosState[k.SENDING]===0&&(!/^\s*$/.test(this.textbox.value)||this.photosState[k.UPLOADED]>0);!a?this.sendButton.setAttribute("disabled",!0):this.sendButton.removeAttribute("disabled")};a.prototype.$11=function(){"use strict";this.likeButton.setAttribute("disabled",!0),setTimeout(function(){this.likeButton.removeAttribute("disabled")}.bind(this),s)};a.prototype.$10=function(a,b){"use strict";this.state[a]=b,this.$8()};a.prototype.$8=function(){"use strict";g.conditionClass(this.form,"_3ciz",this.state.isFocused||this.state.isTyping),g.conditionClass(this.form,"_3cj0",this.state.hasPhotos)};a.prototype.$6=function(){"use strict";this.sendRequest(this.prevSendRequest.url,this.prevSendRequest.data),i.hide(i.find(document,"div",q))};a.prototype.$5=function(event){"use strict";this.$12(event,!0)};a.prototype.$4=function(event){"use strict";this.$12(event,!1)};a.prototype.$12=function(event,a){"use strict";var b=this.form,c=i.convertFormToDictionary(b),d=b.action;b.reset();this.$3();event&&event.prevent();a&&(c.sticker_id=369239263222822);this.sendRequest(d,c);this.$11()};a.prototype.sendRequest=function(a,b){"use strict";var c={start:function(a){i.hide(i.find(document,"div",q))},process:function(a){},error:function(a){i.show(i.find(document,"div",q))},fail:function(a){c.error(a)},postprocess:function(a){m.invoke("m:ajax:complete")}};this.prevSendRequest={data:b,url:a};b=this.$13(b,a,c);b.send()};a.prototype.$13=function(a,b,c){"use strict";__p&&__p();a.action_time=Date.now();var d=i.find(document,"*","m-messaging-composer-container"),e="async_composer";b=new l(b);b.addData(a);b.setMethod("POST");j.msgrRegion&&b.setRequestHeader("X-MSGR-Region",j.msgrRegion);var f=e+"_saving";a=function(a){g.conditionClass(d,e,!a),g.conditionClass(d,f,a)};b.listen("start",a.bind(null,!0));b.listen("finally",a.bind(null,!1));for(var h in c)b.listen(h,c[h]);return b};a.handleSendError=function(){"use strict";i.show(i.find(document,"div",q))};a.handleRecipientUnavailableError=function(){"use strict";alert(p._("Ng\u01b0\u1eddi n\u00e0y hi\u1ec7n kh\u00f4ng c\u00f3 m\u1eb7t."))};e.exports=a}),null);
__d("MQuickPromotionMMessengerBanner",["DOM","MRequest","Stratcom","XQuickPromotionSimpleLoggingController"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=!1,l=null;a=function(a,b,c,d){__p&&__p();if(k)return;k=!0;function e(){var a=j.getURIBuilder().setInt("qp_id",c).setStringToStringMap("qp_instance_log_data",d).setString("qp_event","view").getURI();a=new h(a);a.send()}function f(event){i.removeCurrentListener();var b=event.getNode(a.promo);g.hide(b);l.remove()}function m(event){event.getData().jewel==a.jewel&&e()}function n(event){i.removeCurrentListener(),e(),l=i.listen("m:jewel:flyout:open",null,m)}i.listen("click",a.close,f);b?i.listen("m:qp:embedded-interstitial:close",null,n):l=i.listen("m:jewel:flyout:open",null,m)};f.main=a}),null);
__d("MHeaderSelect",["MViewport","Stratcom"],(function(a,b,c,d,e,f,g,h){h.listen("focus","header-select",g.scrollToHeader)}),null);
__d("MSelectLink",["MJSEnvironment","MLegacyDataStore","MPageController","MRequest","Stratcom","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();a=g.IS_APPLE_WEBKIT_IOS&&parseInt(g.OS_VERSION,10)>=6?"blur":"change";k.listen(a,"select-link",function(a){__p&&__p();var b=a.getNode("tag:select");a=h.get(a.getNode("select-link"));var c=a.method==="POST"?"POST":"GET";l(function(){var a=b.options[b.selectedIndex].getAttribute("value"),d=b.options[b.selectedIndex].getAttribute("title");if(d==="mrequest"){d=new j(a);d.setMethod(c).send()}else a&&i.load(a,{replace:!0,method:c})},0)})}),null);