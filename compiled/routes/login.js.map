{"version":3,"sources":["../../src/routes/login.js"],"names":["router","express","Router","use","req","res","next","isUnauthenticated","redirect","route","get","render","post","auth_passport","authenticate","err","user","info","json","login","logIn","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AACA,IAAIA,SAASC,kBAAQC,MAAR,EAAb;;AAEA;AACAF,OAAOG,GAAP,CAAW,CAACC,GAAD,EAAKC,GAAL,EAASC,IAAT,KAAgB;AAC1B,KAAG,CAACF,IAAIG,iBAAJ,EAAJ,EAA4B;AAC3B,SAAOF,IAAIG,QAAJ,CAAa,mBAAb,CAAP;AACA;AACD,QAAOF,MAAP;AACA,CALD;;AAOAN,OAAOS,KAAP,CAAa,GAAb,EACCC,GADD,CACK,CAACN,GAAD,EAAMC,GAAN,KAAc;AACjBA,KAAIM,MAAJ,CAAW,OAAX;AACD,CAHD,EAICC,IAJD,CAIM,UAASR,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC9BO,qBAAcC,YAAd,CAA2B,OAA3B,EAAoC,UAASC,GAAT,EAAcC,IAAd,EAAoBC,IAApB,EAA0B;AAC7D,MAAIF,GAAJ,EAAS;AAAE,UAAOT,KAAKS,GAAL,CAAP;AAAmB;AAC9B,MAAI,CAACC,IAAL,EAAW;AAAE,UAAOX,IAAIa,IAAJ,CAAS,EAACC,OAAM,KAAP,EAAT,CAAP;AAAiC;AAC9Cf,MAAIgB,KAAJ,CAAUJ,IAAV,EAAgB,UAASD,GAAT,EAAc;AAC9B,OAAIA,GAAJ,EAAS;AAAE,WAAOT,KAAKS,GAAL,CAAP;AAAmB;AAC9B,UAAOV,IAAIa,IAAJ,CAAS,EAACC,OAAM,IAAP,EAAT,CAAP;AACC,GAHD;AAIA,EAPD,EAOGf,GAPH,EAOQC,GAPR,EAOaC,IAPb;AAQA,CAbD;;AAeAe,OAAOC,OAAP,GAAiBtB,MAAjB","file":"login.js","sourcesContent":["import express from \"express\";\nimport {auth_passport} from \"../auth\";\nvar router = express.Router();\n\n/* GET home page. */\nrouter.use((req,res,next)=>{\n\tif(!req.isUnauthenticated()){\n\t\treturn res.redirect('/conversion/group');\n\t}\n\treturn next();\n})\n\nrouter.route('/')\n.get((req, res) => {\n  res.render('login');\n})\n.post(function(req, res, next) {\n\tauth_passport.authenticate('local', function(err, user, info) {\n\t\tif (err) { return next(err); }\n\t\tif (!user) { return res.json({login:false}); }\n\t\treq.logIn(user, function(err) {\n\t\tif (err) { return next(err); }\n\t\treturn res.json({login:true});\n\t\t});\n\t})(req, res, next);\n});\n\nmodule.exports = router;\n"]}