{"version":3,"sources":["../../src/messenger-api-helpers/send.js"],"names":["typingOn","recipientId","recipient","id","sender_action","typingOff","messageToJSON","messagePayload","message","sendMessage","messagePayloads","messagePayloadArray","castArray","map","api","callMessagesAPI","sendReadReceipt","messageData","sendHelloRewardMessage","sendPreferencesChangedMessage","sendChooseGiftMessage","sendGiftChangedMessage","sendGiftPurchasedMessage"],"mappings":";;;;;;AAQA;;;;AACA;;;;;;AAGA;AAZA;;;;;;;AAOA;AAMA,MAAMA,WAAYC,WAAD,IAAiB;AAChC,SAAO;AACLC,eAAW;AACTC,UAAIF;AADK,KADN;AAILG,mBAAe,WAJV,CAIuB;AAJvB,GAAP;AAMD,CAPD;;AASA;AACA,MAAMC,YAAaJ,WAAD,IAAiB;AACjC,SAAO;AACLC,eAAW;AACTC,UAAIF;AADK,KADN;AAILG,mBAAe,YAJV,CAIwB;AAJxB,GAAP;AAMD,CAPD;;AASA;AACA,MAAME,gBAAgB,CAACL,WAAD,EAAcM,cAAd,KAAiC;AACrD,SAAO;AACLL,eAAW;AACTC,UAAIF;AADK,KADN;AAILO,aAASD;AAJJ,GAAP;AAMD,CAPD;;AASA;AACA,MAAME,cAAc,CAACR,WAAD,EAAcS,eAAd,KAAkC;AACpD,QAAMC,sBAAsBC,UAAUF,eAAV,EACzBG,GADyB,CACpBN,cAAD,IAAoBD,cAAcL,WAAd,EAA2BM,cAA3B,CADC,CAA5B;;AAGAO,gBAAIC,eAAJ,CAAoB,CAClBf,SAASC,WAAT,CADkB,EAElB,GAAGU,mBAFe,EAGlBN,UAAUJ,WAAV,CAHkB,CAApB;AAKD,CATD;;AAWA;AACA,MAAMe,kBAAmBf,WAAD,IAAiB;AACvC,QAAMgB,cAAc;AAClBf,eAAW;AACTC,UAAIF;AADK,KADO;AAIlBG,mBAAe,WAJG,CAIU;AAJV,GAApB;;AAOAU,gBAAIC,eAAJ,CAAoBE,WAApB;AACD,CATD;;kBAkBe;AACbR,aADa;AAEbO,iBAFa;AAGbE,wBAHa;AAIbC,+BAJa;AAKbC,uBALa;AAMbC,wBANa;AAObC;AAPa,C","file":"send.js","sourcesContent":["/**\r\n * Copyright 2017-present, Facebook, Inc. All rights reserved.\r\n *\r\n * This source code is licensed under the license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\n// ===== MESSENGER =============================================================\r\nimport api from './api';\r\nimport messages from './messages';\r\n\r\n\r\n// Turns typing indicator on.\r\nconst typingOn = (recipientId) => {\r\n  return {\r\n    recipient: {\r\n      id: recipientId,\r\n    },\r\n    sender_action: 'typing_on', // eslint-disable-line camelcase\r\n  };\r\n};\r\n\r\n// Turns typing indicator off.\r\nconst typingOff = (recipientId) => {\r\n  return {\r\n    recipient: {\r\n      id: recipientId,\r\n    },\r\n    sender_action: 'typing_off', // eslint-disable-line camelcase\r\n  };\r\n};\r\n\r\n// Wraps a message JSON object with recipient information.\r\nconst messageToJSON = (recipientId, messagePayload) => {\r\n  return {\r\n    recipient: {\r\n      id: recipientId,\r\n    },\r\n    message: messagePayload,\r\n  };\r\n};\r\n\r\n// Send one or more messages using the Send API.\r\nconst sendMessage = (recipientId, messagePayloads) => {\r\n  const messagePayloadArray = castArray(messagePayloads)\r\n    .map((messagePayload) => messageToJSON(recipientId, messagePayload));\r\n\r\n  api.callMessagesAPI([\r\n    typingOn(recipientId),\r\n    ...messagePayloadArray,\r\n    typingOff(recipientId),\r\n  ]);\r\n};\r\n\r\n// Send a read receipt to indicate the message has been read\r\nconst sendReadReceipt = (recipientId) => {\r\n  const messageData = {\r\n    recipient: {\r\n      id: recipientId,\r\n    },\r\n    sender_action: 'mark_seen', // eslint-disable-line camelcase\r\n  };\r\n\r\n  api.callMessagesAPI(messageData);\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default {\r\n  sendMessage,\r\n  sendReadReceipt,\r\n  sendHelloRewardMessage,\r\n  sendPreferencesChangedMessage,\r\n  sendChooseGiftMessage,\r\n  sendGiftChangedMessage,\r\n  sendGiftPurchasedMessage,\r\n};\r\n"]}