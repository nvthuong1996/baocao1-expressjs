{"version":3,"sources":["../../src/messenger-api-helpers/messages.js"],"names":["SERVER_URL","process","env","setPreferencesButton","type","title","url","webview_height_ratio","messenger_extensions","viewDetailsButton","giftId","chooseGiftButton","payload","JSON","stringify","data","changeGiftButton","helloRewardMessage","attachment","template_type","text","buttons","preferencesUpdatedMessage","currentGiftText","giftOptionsText","persistentMenu","setting_type","thread_state","call_to_actions","getStarted"],"mappings":";;;;;;;AAGA,MAAMA,aAAaC,QAAQC,GAAR,CAAYF,UAA/B;;AAIA,MAAMG,uBAAuB;AAC3BC,QAAM,SADqB;AAE3BC,SAAO,sBAFoB;AAG3BC,OAAM,GAAEN,UAAW,GAHQ;AAI3BO,wBAAsB,MAJK;AAK3BC,wBAAsB;AALK,CAA7B;;AAQA;;;AAGA,MAAMC,oBAAqBC,MAAD,IAAY;AACpC,SAAO;AACLL,WAAO,cADF;AAELD,UAAM,SAFD;AAGLE,SAAM,GAAEN,UAAW,UAASU,MAAO,EAH9B;AAILH,0BAAsB,SAJjB;AAKLC,0BAAsB;AALjB,GAAP;AAOD,CARD;;AAUA;;;AAGA,MAAMG,mBAAoBD,MAAD,IAAY;AACnC,SAAO;AACLN,UAAM,UADD;AAELC,WAAO,kBAFF;AAGLO,aAASC,KAAKC,SAAL,CAAe;AACtBV,YAAM,aADgB;AAEtBW,YAAM;AACJL,gBAAQA;AADJ;AAFgB,KAAf;AAHJ,GAAP;AAUD,CAXD;;AAaA;;;AAGA,MAAMM,mBAAmB;AACvBZ,QAAM,UADiB;AAEvBC,SAAO,aAFgB;AAGvBO,WAASC,KAAKC,SAAL,CAAe;AACtBV,UAAM;AADgB,GAAf;AAHc,CAAzB;;AAQA;;;;AAIA,MAAMa,qBAAqB;AACzBC,cAAY;AACVd,UAAM,UADI;AAEVQ,aAAS;AACPO,qBAAe,QADR;AAEPC,YAAM,oFAFC;AAGPC,eAAS,CAAClB,oBAAD;AAHF;AAFC;AADa,CAA3B;;AAWA;;;AAGA,MAAMmB,4BAA4B;AAChCF,QAAM;AAD0B,CAAlC;;AAIA;;;AAGA,MAAMG,kBAAkB;AACtBH,QAAM;AADgB,CAAxB;;AAKA;;;AAGA,MAAMI,kBAAkB;AACtBJ,QAAM;AADgB,CAAxB;;AAKA;;;AAGA,MAAMK,iBAAiB;AACrBC,gBAAc,iBADO;AAErBC,gBAAc,iBAFO;AAGrBC,mBAAiB,CACfzB,oBADe,EAEfa,gBAFe;AAHI,CAAvB;;AASA;;;AAGA,MAAMa,aAAa;AACjBH,gBAAc,iBADG;AAEjBC,gBAAc,YAFG;AAGjBC,mBAAiB,CACf;AACEhB,aAASC,KAAKC,SAAL,CAAe;AACtBV,YAAM;AADgB,KAAf;AADX,GADe;AAHA,CAAnB;;kBAYe;AACba,oBADa;AAEbK;AAFa,C","file":"messages.js","sourcesContent":["\r\n\r\n\r\nconst SERVER_URL = process.env.SERVER_URL;\r\n\r\n\r\n\r\nconst setPreferencesButton = {\r\n  type: 'web_url',\r\n  title: 'Set Gift Preferences',\r\n  url: `${SERVER_URL}/`,\r\n  webview_height_ratio: 'tall',\r\n  messenger_extensions: true,\r\n};\r\n\r\n/*\r\n * Button for displaying the view details button for a gift\r\n */\r\nconst viewDetailsButton = (giftId) => {\r\n  return {\r\n    title: 'View Details',\r\n    type: 'web_url',\r\n    url: `${SERVER_URL}/gifts/${giftId}`,\r\n    webview_height_ratio: 'compact',\r\n    messenger_extensions: true,\r\n  };\r\n};\r\n\r\n/*\r\n * Button for selecting a gift\r\n */\r\nconst chooseGiftButton = (giftId) => {\r\n  return {\r\n    type: 'postback',\r\n    title: 'Choose This Gift',\r\n    payload: JSON.stringify({\r\n      type: 'CHOOSE_GIFT',\r\n      data: {\r\n        giftId: giftId,\r\n      },\r\n    }),\r\n  };\r\n};\r\n\r\n/**\r\n * Button for displaying a postback button that triggers the change gift flow\r\n */\r\nconst changeGiftButton = {\r\n  type: 'postback',\r\n  title: 'Change Gift',\r\n  payload: JSON.stringify({\r\n    type: 'CHANGE_GIFT',\r\n  }),\r\n};\r\n\r\n/**\r\n * Message that informs the user of the promotion and prompts\r\n * them to set their preferences.\r\n */\r\nconst helloRewardMessage = {\r\n  attachment: {\r\n    type: 'template',\r\n    payload: {\r\n      template_type: 'button',\r\n      text: 'Thanks for joining our reward program! We’d love to send you a free birthday gift.',\r\n      buttons: [setPreferencesButton],\r\n    },\r\n  },\r\n};\r\n\r\n/**\r\n * Message that informs the user that their preferences have changed.\r\n */\r\nconst preferencesUpdatedMessage = {\r\n  text: 'OK, we’ve updated your preferences. You can change them anytime you want from the menu.',\r\n};\r\n\r\n/**\r\n * Message that informs that we have their current gift selected.\r\n */\r\nconst currentGiftText = {\r\n  text: 'This is your current gift selection. If you’d like to change it, you can do so below.',\r\n};\r\n\r\n\r\n/**\r\n * Message that precedes us displaying recommended gifts.\r\n */\r\nconst giftOptionsText = {\r\n  text: 'Here are some gift options for you:',\r\n};\r\n\r\n\r\n/**\r\n * The persistent menu for users to use.\r\n */\r\nconst persistentMenu = {\r\n  setting_type: 'call_to_actions',\r\n  thread_state: 'existing_thread',\r\n  call_to_actions: [\r\n    setPreferencesButton,\r\n    changeGiftButton,\r\n  ],\r\n};\r\n\r\n/**\r\n * The Get Started button.\r\n */\r\nconst getStarted = {\r\n  setting_type: 'call_to_actions',\r\n  thread_state: 'new_thread',\r\n  call_to_actions: [\r\n    {\r\n      payload: JSON.stringify({\r\n        type: 'GET_STARTED',\r\n      }),\r\n    },\r\n  ],\r\n};\r\n\r\nexport default {\r\n  helloRewardMessage,\r\n  preferencesUpdatedMessage,\r\n};\r\n"]}